<Page x:ConnectionId='1'
    x:Class="MusicPlayer.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MusicPlayer"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local1="using:MusicPlayer.Models"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                        >
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ButtonStyle.xaml"/>
                <ResourceDictionary Source="AppBarButtonStyle.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        
        <local1:ProgressConvert x:Key="progressConvert"/>
        <Storyboard x:ConnectionId='2' x:Name="main_storyBoard"                                      >
            <DoubleAnimationUsingKeyFrames EnableDependentAnimation="True"
                                           Storyboard.TargetName="main_progressbar"
                                           Storyboard.TargetProperty="(RangeBase.Value)">
                <DiscreteDoubleKeyFrame KeyTime="0:0:1"
                                        Value="1"/>
                <DiscreteDoubleKeyFrame KeyTime="0:0:2"
                                        Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:ConnectionId='3' x:Name="main_storyBoard2"                                       >
            <DoubleAnimationUsingKeyFrames EnableDependentAnimation="True"
                                           Storyboard.TargetName="main_progressbar2"
                                           Storyboard.TargetProperty="(RangeBase.Value)">
                <DiscreteDoubleKeyFrame KeyTime="0:0:1"
                                        Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        </ResourceDictionary>
    </Page.Resources>

    <Grid x:ConnectionId='4' Name="main_grid">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="main_listview.Visibility" Value="Collapsed"/>
                        <!--<Setter Target="Title_textblock.Text" Value=""/>-->
                        <Setter Target="main_stackPanel.Visibility" Value="Collapsed"/>
                        <Setter Target="main_ellipse.Height" Value="200"/>
                        <Setter Target="main_ellipse.Width" Value="200"/>
                        <Setter Target="status_textblock.FontSize" Value="20"/>
                        <Setter Target="songTile_textblock.FontSize" Value="15"/>
                        <Setter Target="main_ellipse.VerticalAlignment" Value="Top"/>
                        <Setter Target="BackIcon_textblock.VerticalAlignment" Value="Top"/>
                        <Setter Target="ForwardIcon_textblock.VerticalAlignment" Value="Top"/>
                        <Setter Target="BackIcon_textblock.Margin" Value="5,60,0,0"/>
                        <Setter Target="ForwardIcon_textblock.Margin" Value="0,60,5,0"/>
                    </VisualState.Setters>
                </VisualState>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="700"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="main_ellipse.Height" Value="200"/>
                        <Setter Target="main_ellipse.Width" Value="200"/>
                        <Setter Target="status_textblock.FontSize" Value="20"/>
                        <Setter Target="songTile_textblock.FontSize" Value="15"/>
                    </VisualState.Setters>
                </VisualState>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="800"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <ProgressRing x:ConnectionId='5' Name="main_progressRing"
                      Height="50"
                      Width="50"
                      Grid.Row="2"
                      Grid.RowSpan="4"
                      Visibility="Visible"
                      VerticalAlignment="Center"
                      HorizontalAlignment="Center"/>
        <StackPanel x:ConnectionId='6' Name="main_stackPanel"
                    Orientation="Horizontal"
                    Margin="10,30,0,0">
            <TextBlock x:ConnectionId='25' Name="Title_textblock"
                   FontSize="20"
                   Text="本地音乐"
                       VerticalAlignment="Center"
                   Visibility="Visible"/>
            <Button x:ConnectionId='26' Name="model_button"
                    Content="播放模式"
                    Height="40"
                    Width="70"
                    FontSize="13"
                    Style="{StaticResource TransparentPathIconButtonStyle}"
                    BorderThickness="0"
                    Background="SkyBlue"
                    Foreground="Black"
                    Margin="70,0,0,0"
                    >
                <Button.Flyout>
                    <MenuFlyout x:ConnectionId='27' x:Name="model_flyout">
                        <MenuFlyoutItem x:ConnectionId='28' Name="item_1" 
                                        Text="单曲循环"
                                                            />
                        <MenuFlyoutItem x:ConnectionId='29' Name="item_2"
                                        Text="顺序播放"
                                                            />
                        <MenuFlyoutItem x:ConnectionId='30' Name="item_3"
                                        Text="随机播放"
                                                            />
                        <MenuFlyoutItem x:ConnectionId='31' Name="item_4"
                                        Text="None"
                                                            />
                    </MenuFlyout>
                </Button.Flyout>
            </Button>
        </StackPanel>
        <ListView x:ConnectionId='7' Name="main_listview"
                  SelectionMode="Single"
                  Grid.Row="1"                 
                  Grid.RowSpan="4"
                  IsItemClickEnabled="True"
                  Background="White"
                  Opacity="0.7"
                                                  
                                                     >
            <ListView.ItemTemplate>
                <DataTemplate                          >
                    <StackPanel x:ConnectionId='21' Orientation="Horizontal">
                        <Image x:ConnectionId='22' Name="iamge_Image"
                               Height="20"
                               Width="20"
                               Margin="0,0,10,0"
                                                      />
                        <TextBlock x:ConnectionId='23' Name="title_textblock"
                                   FontSize="13"
                                   VerticalAlignment="Center"
                                   FontWeight="Bold"
                                                        />
                        <TextBlock Text=" - "
                                   VerticalAlignment="Center"
                                   FontFamily="13"/>
                        <TextBlock x:ConnectionId='24' Name="artist_textblock"
                                   FontSize="13"
                                   VerticalAlignment="Center"
                                                         />
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <TextBlock x:ConnectionId='8' Name="status_textblock"
                   FontSize="30"
                   Margin="0,30,0,0"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Grid.Column="1"/>

        <Grid x:ConnectionId='9' Name="ellipse_Grid"
                    Grid.Row="1"
                    Grid.Column="1"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Stretch">



            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock x:ConnectionId='17' Name="BackIcon_textblock"
                    FontFamily="Segoe MDL2 Assets"
                    Text="&#xE76B;"
                       Foreground="AliceBlue"
                    FontSize="50"
                       Margin="10,0,0,0"
                       VerticalAlignment="Center"
                                                         />
            <Ellipse x:ConnectionId='18' Name="main_ellipse"
                     Height="300"
                     Width="300" 
                     Grid.Column="1"
                     RenderTransformOrigin="0.5,0.5">
                <Ellipse.RenderTransform>
                    <CompositeTransform/>
                </Ellipse.RenderTransform>
                <Ellipse.Resources>
                    <Storyboard x:ConnectionId='20' x:Name="story_board"
                                RepeatBehavior="Forever">
                        <DoubleAnimation Duration="0:0:50"
                                         To="360"
                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)"
                                         Storyboard.TargetName="main_ellipse"
                                         d:IsOptimized="True"/>
                    </Storyboard>
                </Ellipse.Resources>
                <Ellipse.Fill>
                    <ImageBrush ImageSource="Assets/girl.jpg"/>
                </Ellipse.Fill>
            </Ellipse>
            <TextBlock x:ConnectionId='19' Name="ForwardIcon_textblock"
                    FontFamily="Segoe MDL2 Assets"
                    Text="&#xE76C;"
                    FontSize="50"
                       Foreground="AliceBlue"
                       Grid.Column="2"
                       Margin="0,0,10,0"
                       VerticalAlignment="Center"
                                                            />

        </Grid>

        <MediaElement x:ConnectionId='10' Name="main_mediaElement"                         
                          AutoPlay="False"/>
        <TextBlock x:ConnectionId='11' Name="songTile_textblock"
                      Grid.Row="2"
                       Grid.Column="1"
                   FontSize="20"
                   Foreground="Black"
                   Margin="0,0,0,10"
                       HorizontalAlignment="Center"/>
        <Grid Grid.Row="3"
              Grid.Column="1"
              Margin="50,0,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Slider x:ConnectionId='15' Name="main_slider"
                    Minimum="0"
                    StepFrequency="1"
                    Foreground="SkyBlue"
                    Background="Gray"
                    Value="{Binding ElementName=main_mediaElement, Path=Position, Converter={StaticResource progressConvert }, Mode=TwoWay}"
                                                           />
            <TextBlock x:ConnectionId='16' Name="playTime_textblock"
                       Grid.Column="1"
                       FontSize="15"
                       Margin="7,0,0,10"
                       Width="90"                      
                       VerticalAlignment="Center"/>
        </Grid>
        <Button x:ConnectionId='12' Name="setting_button"
                Grid.Row="4"
                Grid.Column="1"
                FontFamily="Segoe MDL2 Assets"
                Content="&#xE890;"
                Background="Transparent"
                FontSize="30"
                BorderThickness="0"
                Opacity="0.1"
                Style="{StaticResource TransparentPathIconButtonStyle}"
                HorizontalAlignment="Center"
                                                              
                                                            
                                            />
        <ProgressBar x:ConnectionId='13' Name="main_progressbar"
                     Grid.Row="3"
                     Grid.Column="1"
                     Visibility="Collapsed"/>
        <ProgressBar x:ConnectionId='14' Name="main_progressbar2"
                     Grid.Row="3"
                     Grid.Column="1"
                     Visibility="Collapsed"/>
        <!--<TextBlock Name="lyrics_textblock"
                   Grid.Row="1"
                   Grid.RowSpan="3"
                   Grid.Column="2"
                   Text="歌词部分"
                   FontSize="40"
                   HorizontalAlignment="Center"/>-->
    </Grid>
    <Page.BottomAppBar>
        
        <CommandBar x:ConnectionId='32' Background="White"
                    FontWeight="Bold"
                    Name="main_commanBar">
            <AppBarButton x:ConnectionId='33' Name="back_button"
                          Icon="Previous"
                          Label="上一首"
                                                   />
            <AppBarButton x:ConnectionId='34' Name="play_button"
                          Icon="Play"
                          Label="播放"
                                                   />
            <AppBarButton x:ConnectionId='35' Name="forward_button"
                          Icon="Next"
                          Label="下一首"
                                                      />
            <!--<AppBarButton Name="pause_button"
                          Icon="Pause"
                          Label="暂停"
                          Click="pause_button_Click"/>-->
            <AppBarButton x:ConnectionId='36' Name="stop_button"
                          Icon="Stop"
                          Label="停止"
                                                   />
            <AppBarButton x:ConnectionId='37' Name="add_button"
                          Icon="OpenFile"
                          Label="添加文件"
                                                  />
            <AppBarButton x:ConnectionId='38' Name="volume"
                          Icon="Volume"
                          Label="音量"
                                              >
                <AppBarButton.Flyout>
                    <Flyout x:ConnectionId='47' x:Name="volume_flyout">
                        <StackPanel x:ConnectionId='48' Name="volume_stackPanel"
                                    Orientation="Horizontal"
                                    Height="30"
                                    Width="260">
                            <TextBlock x:ConnectionId='49' Name="volumeIcon_textblock"
                                       FontFamily="Segoe MDL2 Assets"
                                       Text="&#xE994;"
                                       FontSize="30"
                                       Margin="0,4,0,0"
                                                                           />
                            <Slider x:ConnectionId='50' Name="volume_slider"
                                    Maximum="100"
                                    Minimum="0"
                                    Margin="10,0,0,0"
                                    Height="30"
                                    Width="150"
                                                                             />
                            <TextBlock x:ConnectionId='51' Name="volume_textblock"
                                       FontSize="30"
                                       Margin="10,4,0,0"
                                       Text="30"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                            
                            
                       
                    </Flyout>
                </AppBarButton.Flyout>
            </AppBarButton>
            <AppBarButton x:ConnectionId='39' Name="display_button"
                          Icon="FullScreen"
                          Label="全屏"
                                                      />
            <AppBarButton x:ConnectionId='40' Name="settign"
                          Icon="Setting"
                          Label="设置"
                                               >
                <AppBarButton.Flyout>
                    <MenuFlyout x:ConnectionId='41' x:Name="menu_flyout">
                        <MenuFlyoutItem x:ConnectionId='42' Name="background_menu"
                                    Text="自定义背景图片(.jpg)"
                                                                 
                                        FontStyle="Oblique"/>
                        <MenuFlyoutSubItem Text="专辑封面是否转动"
                                           FontStyle="Oblique">
                            <MenuFlyoutItem x:ConnectionId='45' Name="Yes_item"
                                            Text="是"
                                            FontStyle="Oblique"
                                                                  />
                            <MenuFlyoutItem x:ConnectionId='46' Name="No_item"
                                            Text="否"
                                            FontStyle="Oblique"
                                                                 />
                        </MenuFlyoutSubItem>
                        <MenuFlyoutItem x:ConnectionId='43' Name="hidden_menu"
                                        Text="隐藏底栏"
                                        FontStyle="Oblique"
                                                                 />
                        <MenuFlyoutItem x:ConnectionId='44' Name="about_menu"
                                        Text="关于软件"
                                        FontStyle="Oblique"
                                                                />

                    </MenuFlyout>
                </AppBarButton.Flyout>
            </AppBarButton>
        </CommandBar>
    </Page.BottomAppBar>
</Page>

