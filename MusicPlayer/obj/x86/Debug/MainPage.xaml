<Page x:ConnectionId='1'
    x:Class="MusicPlayer.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MusicPlayer"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local1="using:MusicPlayer.Models"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                        
                                  >
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ButtonStyle.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Storyboard x:ConnectionId='2' x:Name="main_storyBoard"                                      >
                <DoubleAnimationUsingKeyFrames EnableDependentAnimation="True"
                                           Storyboard.TargetName="main_progressbar"
                                           Storyboard.TargetProperty="(RangeBase.Value)">
                    <DiscreteDoubleKeyFrame KeyTime="0:0:1"
                                        Value="0"/>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>
            <Storyboard x:ConnectionId='3' x:Name="main_storyBoard2"                                       >
                <DoubleAnimationUsingKeyFrames EnableDependentAnimation="True"
                                           Storyboard.TargetName="main_progressbar2"
                                           Storyboard.TargetProperty="(RangeBase.Value)">
                    <DiscreteDoubleKeyFrame KeyTime="0:0:1"
                                        Value="0"/>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>
        </ResourceDictionary>
    </Page.Resources>
    <Grid x:ConnectionId='4' Name="main_grid">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="main_listview.Visibility" Value="Collapsed"/>
                        <Setter Target="songTile_textblock.FontSize" Value="15"/>
                        <!--<Setter Target="main_ellipse.VerticalAlignment" Value="Top"/>-->
                        <!--<Setter Target="BackIcon_textblock.VerticalAlignment" Value="Top"/>
                        <Setter Target="ForwardIcon_textblock.VerticalAlignment" Value="Top"/>-->
                        <!--<Setter Target="BackIcon_textblock.Margin" Value="5,60,0,0"/>
                        <Setter Target="ForwardIcon_textblock.Margin" Value="0,60,5,0"/>-->
                    </VisualState.Setters>
                </VisualState>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="700"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="songTile_textblock.FontSize" Value="15"/>
                    </VisualState.Setters>
                </VisualState>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="800"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid.RowDefinitions>
            <RowDefinition Height="10"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <ProgressRing x:ConnectionId='5' Name="main_progressRing"
                      Height="50"
                      Width="50"
                      Grid.Row="2"
                      Grid.RowSpan="4"
                      Visibility="Visible"
                      VerticalAlignment="Center"
                      HorizontalAlignment="Center"/>


        <ListView x:ConnectionId='6' Name="main_listview"
                  SelectionMode="Single"
                  Grid.Row="1"      
                  Margin="10,0,0,0"
                  IsItemClickEnabled="True"             
                                                  
                                                               
                                                             
                                                     >
            <ListView.ItemTemplate>
                <DataTemplate                          >
                    <local:LocalMusicControl/>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <ScrollViewer x:ConnectionId='7' Name="ellipse_scrollViewer"
                      Grid.Row="1"
                      Grid.Column="1"
                      IsDeferredScrollingEnabled="False"
                      HorizontalScrollMode="Enabled" 
                      VerticalScrollMode="Enabled"
                      HorizontalScrollBarVisibility="Hidden"  
                      VerticalScrollBarVisibility="Auto">
            <StackPanel x:ConnectionId='10' Name="musicDetails_stackPanel"
                        Orientation="Vertical"
                        Grid.Row="1"
                        Grid.Column="1">
                <Grid x:ConnectionId='11' Name="ellipse_Grid"
                  VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock x:ConnectionId='20' Name="BackIcon_textblock"
                    FontFamily="Segoe MDL2 Assets"
                    Text="&#xE76B;"
                       Foreground="AliceBlue"
                    FontSize="50"
                       Margin="10,0,0,0"
                       VerticalAlignment="Center"
                                                                         
                                                                       
                                                         />
                    <Ellipse x:ConnectionId='21' Name="main_ellipse"
                     Height="200"
                     Width="200" 
                     Grid.Column="1"
                     RenderTransformOrigin="0.5,0.5">
                        <Ellipse.RenderTransform>
                            <CompositeTransform/>
                        </Ellipse.RenderTransform>
                        <Ellipse.Resources>
                            <Storyboard x:ConnectionId='23' x:Name="story_board"
                                RepeatBehavior="Forever">
                                <DoubleAnimation Duration="0:0:50"
                                         To="360"
                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)"
                                         Storyboard.TargetName="main_ellipse"
                                         d:IsOptimized="True"/>
                            </Storyboard>
                        </Ellipse.Resources>
                        <Ellipse.Fill>
                            <ImageBrush ImageSource="Assets/girl.jpg"/>
                        </Ellipse.Fill>
                    </Ellipse>
                    <TextBlock x:ConnectionId='22' Name="ForwardIcon_textblock"
                    FontFamily="Segoe MDL2 Assets"
                    Text="&#xE76C;"
                    FontSize="50"
                       Foreground="AliceBlue"
                       Grid.Column="2"
                       Margin="0,0,10,0"
                       VerticalAlignment="Center"
                                                                            
                                                                          
                                                            />

                </Grid>
                <TextBlock x:ConnectionId='12' Name="songTile_textblock"
                   FontSize="20"
                   Foreground="AntiqueWhite"
                   Margin="0,10,0,0"
                       HorizontalAlignment="Center"/>

                <Button x:ConnectionId='13' Name="model_button"
                    Content="播放模式"
                    FontSize="15"
                    Height="50"
                    Width="80"
                    Margin="0,5,0,5"
                    Style="{StaticResource TransparentPathIconButtonStyle}"
                    Background="SkyBlue"
                    Foreground="Black"
                    Opacity="0.3"
                    HorizontalAlignment="Center"
                                                                
                                                              
                                              
                    >
                    <Button.Flyout>
                        <MenuFlyout x:ConnectionId='15' x:Name="model_flyout">
                            <MenuFlyoutItem x:ConnectionId='16' Name="item_1" 
                                        Text="单曲循环"
                                        FontSize="13"
                                                            />
                            <MenuFlyoutItem x:ConnectionId='17' Name="item_2"
                                        Text="顺序播放"
                                        FontSize="13"
                                                            />
                            <MenuFlyoutItem x:ConnectionId='18' Name="item_3"
                                        Text="随机播放"
                                        FontSize="13"
                                                            />
                            <MenuFlyoutItem x:ConnectionId='19' Name="item_4"
                                        Text="None"
                                        FontSize="13"
                                                            />
                        </MenuFlyout>
                    </Button.Flyout>
                </Button>
                <Button x:ConnectionId='14' Name="setting_button"
                FontFamily="Segoe MDL2 Assets"
                Content="&#xE890;"
                Background="Transparent"
                FontSize="30"
                BorderThickness="0"
                Opacity="0.1"
                Style="{StaticResource TransparentPathIconButtonStyle}"
                HorizontalAlignment="Center"
                                                              
                                                            
                                            />
            </StackPanel>
        </ScrollViewer>

        <ProgressBar x:ConnectionId='8' Name="main_progressbar"
                     Visibility="Collapsed"/>
        <ProgressBar x:ConnectionId='9' Name="main_progressbar2"
                     Visibility="Collapsed"/>
        <!--<TextBlock Name="lyrics_textblock"
                   Grid.Row="1"
                   Grid.RowSpan="3"
                   Grid.Column="2"
                   Text="歌词部分"
                   FontSize="40"
                   HorizontalAlignment="Center"/>-->
    </Grid>
    <Page.BottomAppBar>
        <AppBar x:ConnectionId='25' Name="main_AppBar"
                Background="Snow"              
                IsOpen="True"
                IsSticky="True"
                >
            <Grid>
                <Grid.Resources>
                    <ResourceDictionary>
                        <ResourceDictionary.MergedDictionaries>
                            <ResourceDictionary Source="ButtonStyle.xaml"/>
                        </ResourceDictionary.MergedDictionaries>
                        <local1:ProgressConvert x:Key="progressConvert"/>
                        </ResourceDictionary>
                </Grid.Resources>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center">
                    <MediaElement x:ConnectionId='45' Name="main_mediaElement"                         
                          AutoPlay="False"
                                  Visibility="Collapsed"/>
                    <Image x:ConnectionId='46' Name="bottom_image"
                       Height="62"
                       Width="62"
                       Margin="0,0,0,0"/>
                    <Button x:ConnectionId='47' Name="back_button"
                        FontFamily="Segoe MDL2 Assets"
                        Content="&#xE892;"
                        FontSize="20"
                        Margin='17,0,0,0'
                            Height="45"
                            Width="45"
                        Style="{StaticResource TransparentPathIconButtonStyle}"
                        Background="LightPink"                          
                                                 />
                    <Button x:ConnectionId='48' Name="play_button"
                        FontFamily="Segoe MDL2 Assets"
                        Content="&#xE768;"
                        FontSize="20"
                        Margin='17,0,0,0'
                            Height="45"
                            Width="45"
                        Style="{StaticResource TransparentPathIconButtonStyle}"
                        Background="LightPink"   
                                                   />
                    <Button x:ConnectionId='49' Name="forward_button"
                        FontFamily="Segoe MDL2 Assets"
                        Content="&#xE893;"
                        FontSize="20"
                        Margin='17,0,0,0'
                            Height="45"
                            Width="45"
                        Style="{StaticResource TransparentPathIconButtonStyle}"
                        Background="LightPink"    
                                                      />
                </StackPanel>

                <StackPanel Orientation="Vertical"
                                Grid.Column="1">
                    <Grid Margin="26,0,10,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock x:ConnectionId='43' Name="bottomTitle_textblock"
                                   FontSize='12'
                                   Foreground="Black"
                                   HorizontalAlignment="Left"/>
                        <TextBlock x:ConnectionId='44' Name="playTime_textblock"
                                   FontSize="12"                             
                                   Grid.Column="1"
                                   Foreground="Black"
                                   HorizontalAlignment="Right"/>
                    </Grid>
                    
                    <Slider x:ConnectionId='42' Name="main_slider"
                            Minimum="0"                          
                            StepFrequency="1"
                            Foreground="SkyBlue"
                            Background="Black"
                            Margin="26,0,10,0"
                            Value="{Binding ElementName=main_mediaElement, Path=Position, Converter={StaticResource progressConvert }, Mode=TwoWay}"
                                                                   />
                    
                </StackPanel>
                <StackPanel Orientation="Horizontal"
                                Grid.Column="2">
                    <Button x:ConnectionId='26' Name="stop_button"
                        FontFamily="Segoe MDL2 Assets"
                        Content="&#xE71A;" 
                        FontSize="20"
                        Margin='17,0,0,0'
                            Height="45"
                            Width="45"
                        Style="{StaticResource TransparentPathIconButtonStyle}"
                        Background="LightPink"   
                                                   />
                    <Button x:ConnectionId='27' Name="add_button"
                        FontFamily="Segoe MDL2 Assets"
                        Content="&#xE710;" 
                        FontSize="20"
                        Margin='17,0,0,0'
                            Height="45"
                            Width="45"
                        Style="{StaticResource TransparentPathIconButtonStyle}"
                        Background="LightPink"    
                                                  />
                    <Button x:ConnectionId='28' Name="volume"
                        FontFamily="Segoe MDL2 Assets"
                        Content="&#xF0EE;"
                        FontSize="20"
                        Margin='17,0,0,0'
                            Height="45"
                            Width="45"
                        Style="{StaticResource TransparentPathIconButtonStyle}"
                        Background="LightPink"    
                                              >
                        <Button.Flyout>
                            <Flyout x:ConnectionId='37' x:Name="volume_flyout">
                                <StackPanel x:ConnectionId='38' Name="volume_stackPanel"
                                    Orientation="Horizontal"
                                    Height="30"
                                    Width="260">
                                    <TextBlock x:ConnectionId='39' Name="volumeIcon_textblock"
                                       FontFamily="Segoe MDL2 Assets"
                                       Text="&#xE994;"
                                       FontSize="30"
                                       Margin="0,4,0,0"
                                                                           />
                                    <Slider x:ConnectionId='40' Name="volume_slider"
                                    Maximum="100"
                                    Minimum="0"
                                    Margin="10,0,0,0"
                                    Height="30"
                                    Width="150"
                                                                             />
                                    <TextBlock x:ConnectionId='41' Name="volume_textblock"
                                       FontSize="30"
                                       Margin="10,4,0,0"
                                       Text="30"
                                       VerticalAlignment="Center"/>
                                </StackPanel>



                            </Flyout>
                        </Button.Flyout>
                    </Button>
                    <Button x:ConnectionId='29' Name="display_button"
                        FontFamily="Segoe MDL2 Assets"
                        Content="&#xE740;" 
                        FontSize="20"
                        Margin='17,0,0,0'
                            Height="45"
                            Width="45"
                        Style="{StaticResource TransparentPathIconButtonStyle}"
                        Background="LightPink"    
                                                      />
                    <Button x:ConnectionId='30' Name="setting_Button"
                        FontFamily="Segoe MDL2 Assets"
                        Content="&#xE713;"
                        FontSize="20"
                        Margin='17,0,0,0'
                            Height="45"
                            Width="45"
                        Style="{StaticResource TransparentPathIconButtonStyle}"
                        Background="LightPink"    
                                                        >
                        <Button.Flyout>
                            <MenuFlyout x:ConnectionId='31' x:Name="menu_flyout">
                                <MenuFlyoutItem x:ConnectionId='32' Name="background_menu"
                                    Text="自定义背景图片(.jpg)"
                                        FontSize="13"
                                                                 />
                                <MenuFlyoutSubItem Text="专辑封面是否转动"
                                           FontSize="13">
                                    <MenuFlyoutItem x:ConnectionId='35' Name="Yes_item"
                                            Text="是"
                                            FontSize="13"
                                                                  />
                                    <MenuFlyoutItem x:ConnectionId='36' Name="No_item"
                                            Text="否"
                                            FontSize="13"
                                                                 />
                                </MenuFlyoutSubItem>
                                <MenuFlyoutItem x:ConnectionId='33' Name="hidden_menu"
                                        Text="隐藏底栏"
                                        FontSize="13"
                                        FontStyle="Oblique"
                                                                 />
                                <MenuFlyoutItem x:ConnectionId='34' Name="about_menu"
                                        Text="关于软件"
                                        FontSize="13"
                                                                />

                            </MenuFlyout>
                        </Button.Flyout>
                    </Button>
                </StackPanel>
            </Grid>
        </AppBar>
    </Page.BottomAppBar>
</Page>

